<!-- src/main/resources/static/index.html -->
<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>UWH â€” RSVP & Teams</title>
  <link rel="stylesheet" href="index.css">
  <link rel="manifest" href="/manifest.json">
</head>

<body>
  <h1>UWH Organizer</h1>
  <button id="enable-notifs-btn" onclick="subscribeToPush()">Enable Notifications</button>
  <button id="meme" onclick="window.location.href='https://media.tenor.com/lUCb6srW7xEAAAAM/you-are-funny-laugh.gif'">
  Request Admin Access
</button>

  <div id="auth" class="card">
    <h2>Account</h2>

    <div id="not-logged-in">
      <div style="display:flex; gap:24px;">
        <div style="flex:1">
          <h3>Register</h3>
          <label>Name <input id="reg-name" /></label>
          <label>Username <input id="reg-username" /></label>
          <label>Password <input id="reg-password" type="password" /></label>
          <button onclick="register()">Create account</button>
          <div id="reg-msg"></div>
        </div>

        <div style="flex:1">
          <h3>Login</h3>
          <label>Username <input id="login-username" /></label>
          <label>Password <input id="login-password" type="password" /></label>
          <button onclick="login()">Log in</button>
          <div id="login-msg"></div>
        </div>
      </div>
    </div>

    <div id="logged-in" class="hidden">
      <div>
        Logged in as: <strong id="who"></strong>
        <button onclick="logout()">Log out</button>
      </div>
    </div>
  </div>

  <div id="events-card" class="card">
    <h2>Events</h2>

    <div>
      <button onclick="fetchEvents()">Refresh events</button>
      <!-- give this button an id so we can hide it for non-admins -->
      <button id="create-event-btn" onclick="createEventPrompt()">Create event</button>
      <button id="create-recurring-btn" onclick="createRecurringNow()">Create Thu/Sun events now (manual
        trigger)</button>
    </div>

    <!-- Controls for separating upcoming vs past -->
    

    <h3>Upcoming events</h3>
    <div id="upcoming-events-list"></div>

    <h3>
      Past events
      <small id="past-summary" style="margin-left:8px;color:#666;"></small>
      <div id="events-controls" style="margin-top:12px;">
      
        <button id="toggle-past-btn" onclick="togglePast()">Hide past events</button>
      </div>
    </h3>
    <div id="past-events-list" class="hidden"></div>
  </div>

  <div id="admin-panel" class="card hidden">
    <h2>Admin Panel</h2>
    <button onclick="fetchAllUsers()">Refresh users</button>
    <div id="admin-users"></div>

    <h3>Create event (admin)</h3>
    <label>Title <input id="admin-event-title" /></label>
    <label>Start time (ISO) <input id="admin-event-start" /></label>
    <button onclick="adminCreateEvent()">Create event</button>
  </div>


  <div id="teams-card" class="card hidden">
  <h2>Generate Teams</h2>

  <!-- GENERATION CONTROLS - admin-only -->
  <div id="generate-controls">
    <label>
      Method:
      <select id="team-method">
        <option value="random">Random</option>
        <option value="balanced">Balanced</option>
        <option value="uneven-balanced">Uneven Balanced</option>
      </select>
    </label>
    <div>
      <label>Pick an event:
        <select id="event-select"></select>
      </label>
    </div>
    <button onclick="generateTeams()">Generate teams</button>
  </div>

  <!-- Everyone can see saved teams -->
  <div id="teams-container" class="teams"></div>
</div>


  <script src="index.js"></script>
</body>

</html>
